<script>
	let str = 'ws://192.168.1.115:9003';
	//str = 'ws://localhost:9002';
	str = 'ws://192.168.1.100:9002';
	let ws;
	function go_ws() {
		console.log(new Date() + ', function go_ws() { begin');

		ws = new WebSocket(str);
		ws.onopen = function() {
			console.log(new Date + ", onopen");
			//ws.send("hello");
		};
		ws.onmessage = function(evt) {
			console.log(new Date + ", onmessage evt.data=" + evt.data);
		};
		ws.onclose = function() {
			console.log(new Date + ", onclose()");
			window.setTimeout('go_ws();', 2000);
		};
		ws.onerror = function(evt) {
			console.log(new Date + ", onerror evt=" + evt);
		};
		//console.log('ws.ping=' + ws.ping);
		//console.log('ws.isAlive=' + ws.isAlive);
		
		console.log(new Date() + ', function go_ws() { end');
	}
	go_ws();

	function close_ws() {
		ws.close();
	}
	
	function open_ws() {
		go_ws();
		//ws = new WebSocket(str);
		window.sp(ws);
	}
	
	(window.sp = function(_ws) {
		return;
		var str_p = '';
		for (var p in _ws) {
			str_p += p + '=' + _ws[p] + '\r\n';
		}
		console.log('str_p=' + str_p);
	})(ws);
</script>
<button onclick="close_ws();">close</button>
<button onclick="open_ws();">open</button>