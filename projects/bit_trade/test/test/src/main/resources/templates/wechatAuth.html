<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="/statics/js/vue.min.js"></script>
<script src="/statics/js/vue-resource.js"></script>
<script src="/statics/js/index.js"></script>
<script type="text/javascript" src="/statics/js/wechatSDK.js"></script>
<script type="text/javascript" src="/statics/js/lib/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>



    function wxpay(jsParam) {
        // alert(jsParam2)
        // JS_SDK.init(config.isDebug);
        JS_SDK.chooseWXPay(jsParam);
    }


    function btn(){
        var openid = ${openid}
        // console.log(openid)
        // console.log(1111111111)
        // JS_SDK.init(config.isDebug);//JSSDK接口自动授权
        $.ajax({ type:'post',url: "/pay/wxpay", data: {
                payOrderNo: 654321,
                payMethod: "Weixin_wap",
                openid: openid,
                contentType: "application/x-www-form-urlencoded",
                success: function (data) {
                    console.log("创建预支付: ")
                    var parse = JSON.stringify(data);
                    console.log(parse)
                    wxpay(parse);
                }
            }
        });
    }


</script>
<body>
<!--/*@thymesVar id="openid" type="afu"*/-->
<button type="button" id="btn" onclick="btn()" style="width: 260px;height: 80px;" th:text="${openid}/>

</body>
</html>