<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org"
	xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
        <input type="hidden" th:value="${orderUser.id}" id="id" name="id">
		<input type="hidden" th:value="${orderUser.orderEntrustUserId}" id="orderEntrustUserId" name="orderEntrustUserId">
		<input type="hidden" th:value="${orderUser.userId}" id="userId" name="userId">
		<input type="hidden" th:value="${orderUser.type}" id="type" name="type">
		<input type="hidden" th:value="${orderUser.entrustId}" id="entrustId" name="entrustId">

		<form class="form-horizontal m-t">
			<div class="form-group">
				<label class="col-sm-2 control-label">号码：</label>
				<div class="form-control-static" th:text="${orderUser.loginName}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">名称：</label>
				<div class="form-control-static" th:text="${orderUser.realName}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">编号：</label>
				<div class="form-control-static" th:text="${orderUser.orderNumber}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">单价：</label>
				<div class="form-control-static" th:text="${orderUser.price}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">数量：</label>
				<div class="form-control-static" th:text="${orderUser.quantity}"></div>
			</div>

			<div class="form-group">
				<label class="col-sm-2 control-label">交易对：</label>
				<div class="form-control-static" th:class="${orderUser.productType == 1 ? 'label label-primary' : 'label label-danger'}" th:text="${orderUser.productType == 1 ? 'CNY/USDT' : 'CNY/BI'}">
				</div>
			</div>

			<div class="form-group">
				<label class="col-sm-2 control-label">订单状态：</label>
				<div class="form-control-static" th:if="${orderUser.orderStauts==0}">已取消</div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==1}">已完成 </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==2}">待支付</div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==3}">待放行 </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==4}">拒绝放行</div>
			</div>

			<div class="form-group" th:if="${orderUser.orderStauts==0}">
				<label class="col-sm-2 control-label">取消状态：</label>
				<div class="form-control-static" th:if="${orderUser.orderStautsType==1}">客户取消 </div>
				<div class="form-control-static" th:if="${orderUser.orderStautsType==2}">客服取消</div>
				<div class="form-control-static" th:if="${orderUser.orderStautsType==3}">超时取消 </div>
			</div>

			<div class="form-group">
				<label class="col-sm-2 control-label">备注：</label>
				<div class="form-control-static" th:text="${orderUser.remark}">
				</div>
			</div>

			<div class="form-group">
				<div class="form-control-static" th:if="${orderUser.orderStauts==3}"><button onclick="myFunction()" id="complete">放币</button> </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==4}"><button onclick="myFunction()" id="complete">放币</button> </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==2}"><button onclick="CoinCancel()" id="completes">取消订单</button> </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==3}"><button onclick="CoinCancel()" id="completes">取消订单</button> </div>
				<div class="form-control-static" th:if="${orderUser.orderStauts==4}"><button onclick="CoinCancel()" id="completes">取消订单</button> </div>
			</div>
		</form>
    </div>
    <div th:include="include :: footer"></div>
	<script>
        function myFunction() {
            var orderEntrustUserId = document.getElementById("orderEntrustUserId").value;
            var userId = document.getElementById("userId").value;
            var id = document.getElementById("id").value;
            var type = document.getElementById("type").value;
            var entrustId = document.getElementById("entrustId").value;
            $.ajax({
                cache: true,
                type: "POST",
                url: "/c2c/orderUser/updateOrderUserCoinRelease",
                data: {
                    "id": id,
                    "orderEntrustUserId": orderEntrustUserId,
                    "userId": userId,
					"type":type,
                    "entrustId":entrustId
                }, async: false,
                error: function (request) {
                    $.modal.alertError("系统错误");
                },
                success: function (data) {
					$.operate.saveSuccess(data);
                }
            });
        }


        function CoinCancel() {
            var id = document.getElementById("id").value;
            $.ajax({
                cache: true,
                type: "POST",
                url: "/c2c/orderUser/updateOrderUserCoinCancel",
                data: {
                    "id": id,
                }, async: false,
                error: function (request) {
                    $.modal.alertError("系统错误");
                },
                success: function (data) {
					$.operate.saveSuccess(data);
                }
            });
        }
	</script>
</body>
</html>