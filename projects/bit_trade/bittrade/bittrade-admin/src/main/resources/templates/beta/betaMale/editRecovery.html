<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:include="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<style>
    .banner-box{
        width:350px;
        height:150px;
        border:1px solid #e5e6e7;
        /*	background:url(../../img/banner-add.png) no-repeat center;*/
        background-size:45px 45px;
        position: relative;
        box-sizing: content-box;
    }
    .downloadPic{
        width:100%;
        height:100%;
        opacity: 0;
        position: absolute;
        top:0;
        left:0;
        z-index:2;
    }
    .banner-img{
        position: absolute;
        width:100%;
        height:100%;
        top:0;
        left:0;
        z-index:1;
    }
    .add-img{
        position: absolute;
        width:24px;
        height:24px;
        line-height:24px;
        text-align:center;
        left:0;
        bottom:0;
        top:0;
        right:0;
        margin:auto;
        font-size:32px;
        z-index:0;
    }
    .banner-size{
        float: right !important;
        margin-top: -15px;
    }
</style>
<head th:include="include :: header"></head>
<body class="white-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">
    <form class="form-horizontal m" id="form-banner-edit" th:object="${vo}">
        <input name="id" type="hidden" th:field="*{id}"/>

        <div class="form-group">
            <label class="col-sm-3 control-label ">价格：</label>
            <div class="col-sm-8">
                <input class="form-control" type="text" id="price" name="price"  th:field="*{price}" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">收益价：</label>
            <div class="col-sm-8">
                <input class="form-control" type="text" id="earningsPrice" name="earningsPrice" th:field="*{earningsPrice}"  />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">溢价状态：</label>
            <div class="col-sm-8">
                <select id="premiumStauts" name="premiumStauts" class="form-control m-b" th:with="type=${@dict.getType('premium_Stauts')}">
                    <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{premiumStauts}"></option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label">请选择套餐：</label>
            <div class="col-sm-9">
                <select id="comboId" name="comboId" th:with="type=${list}" th:field="*{comboId}">
                    <option th:each="dict : ${type}" th:selected="${dict.id eq comboId}" th:text="${dict.dogName}" th:value="${dict.id}"></option>
                </select>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label ">请选择激活：</label>
            <div class="col-sm-8">
                <select id="betaActivate" name="betaActivate" class="form-control m-b" th:with="type=${@dict.getType('beta_activate')}">
                    <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{betaActivate}"></option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">所属用户：</label>
            <div class="col-sm-8">
                <input class="form-control" type="text" id="name" name="name" th:field="*{name}"  />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label">预售时间：</label>
            <div class="col-sm-8">
                <input class="time-input" id="presellTime" name="params[presellTime]" th:field="*{presellTime}"/>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">银行名称：</label>
            <div class="col-sm-8">
                <input class="form-control" id="bankName" name="bankName" th:field="*{bankName}"  />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">银行卡号：</label>
            <div class="col-sm-8">
                <input class="form-control" id="bankNumber" name="bankNumber" th:field="*{bankNumber}"  />
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label ">支付宝账号：</label>
            <div class="col-sm-8">
                <input class="form-control" id="alipayNumber" name="alipayNumber" th:field="*{alipayNumber}"  />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label ">微信账号：</label>
            <div class="col-sm-8">
                <input class="form-control" id="wechatNumber" name="wechatNumber" th:field="*{wechatNumber}"  />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label">微信收款二维码：</label>
            <div class="col-sm-8">
                <div class="banner-box">
                    <img th:src="*{wechat}"  width="304" height="228">
                    <p class="add-img"></p>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label">支付宝二维码：</label>
            <div class="col-sm-8">
                <div class="banner-box">
                    <img th:src="*{alipay}" width="304" height="228">
                    <p class="add-img">+</p>
                </div>
            </div>
        </div>

    </form>
</div>
<div th:include="include::footer"></div>
<script th:src="@{/ajax/libs/select/select2.js}"></script>
<script>
    var isFirst = true; /* 首次执行提交 */
    $("#form-banner-edit").validate({
        rules: {
            name: {
                required: true
            },
            sort: {
                required: true
            },
            pictureUrl: {
                // required: true,
            }
        }
    });

    function submitHandler() {
        if ($.validate.form()) {
            if(isFirst){
                edit();
            }
        }
    }

    function edit() {
        var id = $("input[name='id']").val();
        var price = $("input[name='price']").val();
        var earningsPrice = $("input[name='earningsPrice']").val();
     /*   var premiumStauts= document.getElementById("premiumStauts").value*/
        var betaActivate =document.getElementById("betaActivate").value
        var presellTime = $("#presellTime").val();
        var comboId= document.getElementById("comboId").value
        $.ajax({
            cache: true,
            type: "POST",
            url: ctx + "beta/betaMale/updateEditRecovery",
            data: {
                "id":id,
                "comboId": comboId,
                "price": price,
                "earningsPrice": earningsPrice,
                "presellTime": presellTime,
         /*       "premiumStauts":premiumStauts,*/
                "betaActivate":betaActivate,
            },
            async: false,
            error: function (request) {
                $.modal.alertError("系统错误");
            },
            success: function (data) {
                if(data.code ==  web_status.SUCCESS){
                    isFirst = false;
                    $.operate.saveSuccess(data);
                }else{
                    $.modal.alertError(data.message);
                }
            }
        });
    }

</script>
</body>
</html>
